<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="Python,Django,JavaScript,程序员,人生苦短,我用Python" name="keywords">
    <meta content=" Python Django JavaScript 学习讨论,我们是一群热爱Python的程序员，人生苦短，我用JavaScript！一个不会JavaScript的Python开发者不是一个好网管。" name="description">
    <meta content="J.sky" name="author">
    <title>SuiYan 碎言博客  List Pages 第16页</title>
    <!-- 引入 pico.css -->
    <link rel="stylesheet" href="https://suiyan.cc/assets/css/pico.min.css">
    <!-- 引入 pico.css -->
    <link rel="stylesheet" href="https://suiyan.cc/assets/css/font-awesome-4.7.0/css/font-awesome.min.css">
    <!-- 引入 站点样式 -->
    <link rel="stylesheet" href="https://suiyan.cc/assets/css/custom.css">
    <script src="https://suiyan.cc/assets/js/jquery-3.3.1.min.js"></script>
    
</head>
<body>
<div class="hero" data-theme="dark" style="background-image: url('https://suiyan.cc/assets/images/bg.jpg');">
    <nav class="container-fluid"><ul>
    <li><a href="https://suiyan.cc/" class="contrast">SuiYan</a></li>
</ul>
<ul>
    <li>
        <details role="list" dir="rtl">
            <summary aria-haspopup="listbox" role="link" class="contrast">Theme</summary>
            <ul role="listbox">
                <li><a href="#" data-theme-switcher="auto">Auto</a></li>
                <li><a href="#" data-theme-switcher="light">Light</a></li>
                <li><a href="#" data-theme-switcher="dark">Dark</a></li>
            </ul>
        </details>
    </li>
</ul></nav>
    <head><header class="container">
    <hgroup class="hd">
        <img class="avatar" src="https://suiyan.cc/assets/images/avatar.jpg"/>
        <div>You see see you , This one day day di.</div>
        <ul class="sns-ul">
            
            <li class="sns-li">
                <a href="https://github.com/bosichong/suiyan" target="_blank">
                    <i class="fa fa-github "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://gitee.com/J_Sky/suiyan" target="_blank">
                    <i class="fa fa-git "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://weibo.com/qq285911" target="_blank">
                    <i class="fa fa-weibo "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://user.qzone.qq.com/285911/" target="_blank">
                    <i class="fa fa-qq "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://www.zhihu.com/people/J_sky/activities" target="_blank">
                    <i class="fa fa-book "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://suiyan.cc/rss.xml" target="_blank">
                    <i class="fa fa-rss "></i>
                </a>
            </li>
            
        </ul>
    </hgroup>
</header></head>
</div>
<main class="container">
    <div class="grid">
        <section>



<hgroup>
    <h2>基于Python、Tk构建的可视化目录文件同步助手</h2>
    <h3> 作者:<a href="#">J.sky</a> <small>发布时间:2017-10-26 15:04:15</small> Tag:
        
        
        <samll>站长源创</samll>
        
    </h3>
</hgroup>
<p><p>之前用java GUI写过一个简单的目录同步助手，前几天在WIN10下边想用的时候，发现竟然无法使用了，正好最近在学习python，所以用python重写了一简单的目录文件同步助手。</p>
<p><img alt="输入图片说明" src="assets/images/media/upload/2018/01/Snip20180109_24.png" /></p>
<h2>功能需求</h2>
<p>之前有些喜欢拍照，但设备和场景比较多，所以每次照相回来，都为每台设备创建目录，然后在目录下边创建以时间为名的目录进行照片备份。
之后这个备份了几年，后来目录越来越多，经常发现无法准确的判断哪些照片是否备份过，因为实在太多了，所以，需要一个实际目录与备份目录比较，
并且能把比较后的结果复制到备份目录中进行备份。</p>
<h2>需求分析</h2>
<p>从需求上分析：参数需要给定两个目录，然后有比较和复制两个功能，GUI构建上只需要两个目录选择和两个按钮，使用Tk即可实现。
技术上实现采用python的 filecmp shutil os 进行一些目录及文件的比较及复制来实现需求。</p>
<h2>逻辑分析</h2>
<p>通过目录选择框获得了两个字符串，然后进行比较，分析出不同的目录与文件，然后复制到目标目录中。
为此，我创建了一个目录比较类，专门负责比较目录与文件。
此类中的比较方法中使用到了递归，Python中的递归记得最大是1000次，我觉得这个目录层次应该是够了吧？
其实本程序中，目录与文件的分析是重要部分：</p>
<ul>
<li>先判断根目录中不相同的目录与文件，然后分别记录。</li>
<li>如果有相同的目录，使用递归比较这二个相同的目录。</li>
<li>最后分别创建目录，复制文件到目标目录中。</li>
</ul>
<h2>Tk Button传参方法</h2>
<p>在构建GUI的时候，点击按钮激活的函数需要传参数进去，但Python并没有在Button中提供传参的方法，后来查到可以使用lambda</p>
<pre><code>command=lambda: def(参数1, 参数2)
</code></pre>
<p>这样即可达到函数传参的实现。</p>
<h2>目录与文件的操作</h2>
<p>通过这个小软件的制作，达到了对python目录及文件的分析及创建复制的模块功能的复制，功能上还可以继续扩展，后续有需要再继续添加。</p>
<h2>本文源码下载</h2>
<ul>
<li><a href="https://github.com/bosichong/PyDirectoryComparison">github</a></li>
<li><a href="https://gitee.com/J_Sky/PyDirectoryComparison">开源中国码云镜像gitee</a></li>
</ul></p>


<hr>
<br>


<hgroup>
    <h2>“编学编玩”用Pygame编写游戏（5）pygame绘制一个钟表</h2>
    <h3> 作者:<a href="#">J.sky</a> <small>发布时间:2017-10-23 15:51:11</small> Tag:
        
        
        <samll>pygame</samll>
        
    </h3>
</hgroup>
<p><p>游戏中绘制圆及圆形的轨迹需求还是不少的，而且很多地方都需要用到圆及弧度的理论，如果想做些游戏的话，必须熟练掌握这些基本知识。</p>
<h2>一些知识点</h2>
<ul>
<li>radius 圆的半径</li>
<li>diameter 圆的直径</li>
<li>angle 角度</li>
<li>一个圆的完整的弧度 PI*2=6.28</li>
<li>1弧度的角度值为 360/6.28=57.3248</li>
<li>1度的弧度值为 6.28/360=0.0174</li>
<li>math.degrees(x)将角度x从弧度转换为度。</li>
<li>math.radians(x)将角度x从度转换为弧度。</li>
<li>math.sin(x)返回x弧度的正弦值。</li>
<li>math.cos(x)返回x弧度的余弦值。</li>
</ul>
<h2>圆周上点的坐标</h2>
<pre><code>x = math.cos(math.radians(angle)) * (radius)
y = math.sin(math.radians(angle)) * (radius）
</code></pre>
<p>如果不想深入了解的话，只需要记住，我们需要角度，即可求得圆周上的坐标值，对就上边的函数解释应该可以理解上边的python语句的含意。</p>
<h2>实例</h2>
<p>没有比绘制一个表盘更贴近实际需求的例子了，通过pythondatetime函数，我们可以很方便的获得时间，然后转换成相关数据。</p>
<p>以下为游戏效果图，建议下载相关代码跑一下，有问题可以留言给我。</p>
<p><img alt="输入图片说明" src="assets/images/media/upload/2017/10/Snip20171023_1.png" /></p>
<h2>本文源码下载</h2>
<p>请git clone 下所有代码，以免造成游戏跑不起来的情况。本例源文件pygame05.py</p>
<ul>
<li><a href="https://github.com/bosichong/My_pygame/">github</a></li>
<li><a href="https://gitee.com/J_Sky/My_pygame/">开源中国码云镜像gitee</a></li>
</ul></p>


<hr>
<br>


<hgroup>
    <h2>“编学编玩”用Pygame写游戏（4）一个python问答游戏</h2>
    <h3> 作者:<a href="#">J.sky</a> <small>发布时间:2017-10-22 09:50:35</small> Tag:
        
        
        <samll>pygame</samll>
        
    </h3>
</hgroup>
<p><p><img alt="输入图片说明" src="https://suiyan.cc/assets/images/media/upload/2017/10/Snip20171022_7.png" />
<img alt="输入图片说明" src="https://suiyan.cc/assets/images/media/upload/2017/10/Snip20171022_8.png" />
<img alt="输入图片说明" src="https://suiyan.cc/assets/images/media/upload/2017/10/Snip20171022_9.png" /></p>
<p>好开心，买的书终于到手了，极力推荐《Python游戏编程入门》！非常不错的一本书，另千万别买《Python和Pygame游戏开发指南》，好了，不要问什么，请叫我雷锋！</p>
<h2>游戏流程</h2>
<p>我觉得新手编写游戏的时候最大的难点是先把游戏构思的太细致了，以至于真正上手编程的时候完全不知道从哪里开始，平时构思设计游戏时，脑子里那闪耀的光芒，就觉得只要拿起键盘，一个旷世神作的游戏就要蛋生了！
实际呢？两眼瞪着电脑，我特么从哪开始写呢？，所以你需要一个流程，你可以拿纸笔画，或是找个流程图画一下。可以参考下图：</p>
<p><img alt="输入图片说明" src="https://suiyan.cc/assets/images/media/upload/2017/10/Snip20171022_5.png" /></p>
<p>有游戏流程后，先不要急于实现游戏的细节功能，先把流程走一下，先搭建游戏骨架<code>pygame.init()</code>，嗯，这个你应该很熟了。
然后我们通过面向对象的方法来进行这个小游戏的编写：</p>
<pre><code>pyqa.game_Start()
pyqa.show_qt()
pyqa.game_Over()
</code></pre>
<p>这样在循环中你应该很明白游戏的流程，虽然他们都在循环中，但我们可以控制他们在游戏中渲染的逻辑，这样我们就可以考虑好游戏中类的属性了。
这是一个问答游戏，需要有基本的题库数据，我们通过python的流读入数据，因为python可以很方便的读行，这样我们可以定义一些规律，把每一题的问题、选择项，答案都分别占一行。
这样导入数据后可以返回一个list，方便操作。</p>
<p>好了，我们定义一下当前答题类<code>class Pyqa</code>的一些属性，首先他需要三个开关，分别代表游戏开始画面，答题画面，游戏结束画面，当然游戏一开始就是开始画面，我们可以设置他为<code>True</code>，
这样游戏一旦开始，即可直接进入游戏开始画面，当然我们还需要定义三个函数，分别渲染三个场景，通过<code>if self.gameStart</code>判断当前是否要渲染这段场景。
好了，流程说到这里应该了解了吧？如果还是很头疼，建议先打代码试试，游戏内容可以不用填加，就试过场。</p>
<h2>游戏中的事件</h2>
<p>当我们运行游戏的时候，我们发现游戏只停止在游戏开始画面上，并没有继续进和到问答画面，因为我们没有加入游戏的控制，我们通过玩家来按键获取当前的游戏按键事件，
<code>pygame</code>中的游戏事件轮询获取相应的事件来响应用户的操作。</p>
<pre><code>while True:
    for event in pygame.event.get():
</code></pre>
<p>当我们通过<code>event.key == K_RETURN:</code>在游戏开始画面处获得了回车键的事件，就可以把游戏中的<code>self.showQuestion</code>设置<code>True</code>，然后开始游戏了，其它响应也是如此，
比如获取游戏中的答案数字，也是通过相应的键值获取，具体可以查看代码了解。</p>
<h2>答题场景编写</h2>
<p>本游戏的核心就是回答问题，导入题库后，通过<code>def show_qt()</code>方法来渲染问题及选项。我在游戏中定义了一个函数<code>def print_text</code>是专门用来打印游戏中的文字的。
当我们在游戏中选择答案按下数字键1-4的时候，我们会通过<code>pyqa.handle_input(int)</code>方法来处理当前游戏中的一些数据，比如回答是否正确，提示正确答案，记录回答正确数等，
当我们再次按下回车键，<code>def next_question</code>方法会更新问题题库的索引指针，告诉<code>def show_qt()</code>我得渲染下一道题了！</p>
<h2>游戏结束</h2>
<p>当<code>def next_question</code>通过<code>self.current &gt;= len(self.data)</code>发现已经到达题库最后边了，游戏就要结束了，设置游戏开关相关参数为false，设置游戏结束标识<code>gameOver</code>为<code>true</code>
进入游戏结束画面，展示游戏数据统计，最后当然还可以让你有重来的机会，具体实现请看代码吧，无非就是一些按键事件触发。</p>
<h2>写在最后</h2>
<p>无论是整个游戏还是中间的答题系统，我们发现在这个游戏中我们必须细致入微的进行设计判断每一步的操作，这就是游戏设计的精髓及乐趣，至少我们可以按着自己的需要来进行设计，当你把游戏设计成功，代码编写运行无错时，希望你能体会到这其中的乐趣！如果你有时间，可否帮忙丰富一下题？谢啦，记得提git提交给我哦，谢谢了。</p>
<h2>本文源码下载</h2>
<p>请git clone 下所有代码，以免造成游戏跑不起来的情况。</p>
<ul>
<li><a href="https://github.com/bosichong/My_pygame/">github</a></li>
<li><a href="https://gitee.com/J_Sky/My_pygame/">开源中国码云镜像gitee</a></li>
</ul></p>


<hr>
<br>


<hgroup>
    <h2>“编学编玩”用Pygame写游戏（3）让角色动起来及碰撞检测</h2>
    <h3> 作者:<a href="#">J.sky</a> <small>发布时间:2017-10-20 16:00:52</small> Tag:
        
        
        <samll>pygame</samll>
        
    </h3>
</hgroup>
<p><p>上次的代码中，除了绘制基本图形与图片外，中间还插入了一个小小动画，就是头像在不停的移动，这个移动确实简单了些，游戏中的的角色肯定不是简单的移动几像素那么简单了。</p>
<p><img alt="输入图片说明" src="https://suiyan.cc/assets/images/media/upload/2017/10/QQ20171020-145146-HD111.gif" /></p>
<h2>屡屡顺序</h2>
<p>我觉得刚开始做游戏写代码的时候，总是弄不清游戏的顺序，你可以这样想象一下，比如是拍电影，大家都了解电影是一段一段拍，最后合成在一起然后电影可以播放了。
游戏呢和这个差不多，也是一段一段做，只不过游戏需要一些条件判断，True了，我就播放第三段，这个属性值达到了我就播放第五段，游戏over了，我就播放结尾。
好吧，那么我们规划一下现在这个小游戏（应该算不上是一个游戏）场景及角色。</p>
<h2>游戏内容</h2>
<p>建一个 640X480的黑色背景的游戏场景，场景中随机生成一些大小一样的小球，他们随机属性值，有一个绿色，有一组红色，如果绿色碰到红色他们就会反转滚动，这些小球如果碰到边界也会反转滚动。
注意：这里碰撞的检测之后的动作，只是简单的，并不是真的物理运动哦，当然如果你很懂物理学，做一组力学物理运动应该也不是很难的。</p>
<h2>游戏场景</h2>
<ul>
<li>游戏场景的搭建和之前基本上差不多，这里不在介绍了，如果不了解可以翻看之前或是本节的代码参考。</li>
</ul>
<h2>游戏中的角色</h2>
<p>之前我们在场景中是直接绘制的图形，这次我们通过面向对象的方式来管理场景中的角色，pygame中提供了一个<code>Sprite</code>类，这个类专门为游戏中的角色精灵准备的。
框架中还提供了一个<code>pygame.sprite.Group()</code>容器，他可以把sprite加进去，通过group来管理，group这个容器，通过查看源代码，他只能处理图片类型的sprite。
如果创建的Rect对象是不行的，这种加到组里后，通过draw是无法绘制出来的，<code>group.draw()</code>这个方法中的画笔使用了<code>blit()</code>，而不是<code>draw()</code></p>
<h2>游戏中的逻辑判断</h2>
<p>这个我们直接在游戏中的循环当中直接判断，我是这么把游戏分成各种对象的：</p>
<ul>
<li>游戏场景对象，他只负责绘制场景中的任何角色及精灵</li>
<li>游戏逻辑判断对象，他只负责判断游戏场景中的碰撞，时间检测，然后修改他们的属性。</li>
<li>精灵group，他们只负责创建，删除。</li>
</ul>
<h2>开始制作</h2>
<p>理论课结束，我们来实践一下，<code>main()</code>函数中创建一个游戏运行函数<code>rungame()</code>，这个函数中运行着当前游戏的所有数据，及各种事件触发的检测。
为什么需要<code>rungame()</code>?你可以把他这个函数看成一个电影片段，当前你还可以有<code>gamestart() gameover()</code>函数，这样游戏运行到哪个部位时就让哪个函数运行即可。</p>
<h2>Sprite 精灵</h2>
<p>说说<code>class MyImgSprite(pygame.sprite.Sprite</code>，这是当前游戏中的精灵，我们为他创建了几个属性，其中比较重要的有：</p>
<pre><code>self.image = pygame.image.load('./images/a.png') #导入图片
self.rect = self.image.get_rect() #返回一个rect对象
self.rect.topleft = (random.randint(40,590),random.randint(40,430))#设置他的坐标  
self.last_update = pygame.time.get_ticks()#获取当前游戏动行的时间，这是一个整数，不明白可以打印看看
#移动速度
self.speed_x = random.randint(1,10)
self.speed_y = random.randint(1,10)
</code></pre>
<p>有了速度，我们就可以通过<code>update()</code>方法来更新自己的坐标</p>
<pre><code>now = pygame.time.get_ticks()
if now - self.last_update &gt;1:#通过这个时间差来做一些动画       
    #self.rect.topleft = (random.randint(0,600),random.randint(0,440))#随机变化位置
    self.rect.x += self.speed_x
    self.rect.y += self.speed_y
    self.last_update = now
</code></pre>
<p>如果你不在<code>update()</code>方法更新任何值，那么 这个精灵就是不会动弹的。
那么问题来了，为什么不直接在游戏循环中更新？
上节的代码中有段小小的移动是在循环中更新的，因为那只有一段动画，如果以后有很多个对象的话，在循环中更新会很麻烦，这里更新更符合面向对象的的编程方式。</p>
<h2>绘制及更新</h2>
<p>在rungame函数中创建个绿球，一组红球，然后就可以直接在场景里绘制了，绘制方法：</p>
<pre><code>drawbackground()#绘制场景背景颜色
DISPLAYSURF.blit(m.image,m.rect)#绘制绿球
myimgs.draw(DISPLAYSURF)#绘制一组红球
</code></pre>
<p>场景中的绘制顺序应该是：</p>
<ol>
<li>绘制精灵</li>
<li>逻辑判断</li>
<li>udpate()更新数据</li>
</ol>
<p>以此为循环，这样反复循环即可生成画面。</p>
<h2>逻辑判断</h2>
<p>说到逻辑判断，这次场景中包括的判断有二种：边界碰撞及球体之间的碰撞。
边界碰撞，我自个写了个边界碰撞检测器<code>BorderCrossing.py</code>，因为我在pygame中没找到边界碰撞检测的方法，大家在运行代码的时候，记得git clone一下整个项目。
这个边界碰撞检测器，我就不多说了，不然这又一篇博客了，有兴趣可以自己看看源码。</p>
<p>球体之间的碰撞检测直接套用的pygame中的碰撞检测，具体可以参考官方文档</p>
<p><a href="http://pygame.org/docs/ref/sprite.html#pygame.sprite.spritecollide">碰撞检测官方文档</a></p>
<h2>更新游戏数据</h2>
<p>在逻辑判断中根据自己的需要进行速度等数据修改，最后记得用方法更新一下精灵们的坐标。
说的不是很好，具体大家跑跑程序，改改数值就明白了，如果有什么不懂的，可以直接留言或是邮件给我。欢迎各位大佬指正！</p>
<h2>本文源码下载</h2>
<p>请git clone 下所有代码，以免造成游戏跑不起来的情况。</p>
<ul>
<li><a href="https://github.com/bosichong/My_pygame/">github</a></li>
<li><a href="https://gitee.com/J_Sky/My_pygame/">开源中国码云镜像gitee</a></li>
</ul></p>


<hr>
<br>



<nav>
    <li><a href="list_15.html" role="button" class="outline">Prev</a></li>
    <li><small>16 / 27</small></li>
    <li><a href="list_17.html" role="button" class="outline">Next</a></li>
</nav>

</section>
        <aside><section>
    <hgroup>
        <h2>Search</h2>
        <h3>Search This SuiYan blog</h3>
    </hgroup>

    <!-- Search -->
    <input type="text" id="search-input" name="search" placeholder="JavaScript">
    <button id="search-btn" class="contrast"
            data-target="modal-example"
            onClick="toggleModal(event)">Search
    </button>


    <!-- Modal -->
    <dialog id="modal-example">
        <article>
            <a href="#close"
               aria-label="Close"
               class="close"
               data-target="modal-example"
               onClick="toggleModal(event)">
            </a>
            <h3>搜索结果</h3>
            <div id="modal" style="display: none;">
                <ul id="result-list"></ul>
            </div>
        </article>
    </dialog>
    <script src="https://suiyan.cc/assets/js/url.js"></script>
    <script src="https://suiyan.cc/assets/js/main.js"></script>
    <script src="https://suiyan.cc/assets/js/modal.js"></script>

</section>


<nav>
    <ul>
        
        <li>
            <a href="https://suiyan.cc/index.html">
                <i class="fa fa-home"></i>
                Blog Home
            </a>
        </li>
        
        <li>
            <a href="https://suiyan.cc/archives.html">
                <i class="fa fa-archive"></i>
                Blog Archive
            </a>
        </li>
        
        <li>
            <a href="https://suiyan.cc/tags.html">
                <i class="fa fa-tags"></i>
                Blog Tag
            </a>
        </li>
        
        <li>
            <a href="https://suiyan.cc/aboutme.html">
                <i class="fa fa-user"></i>
                About Me
            </a>
        </li>
        
    </ul>
</nav>
</aside>
    </div>

</main>
<footer><div class="container">
    <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
    <p><small>
        Powered by
    </small>
        <a href="https://github.com/Jsky2020/suiyan" target="_blank">
            SuiYan
        </a>
       <small> | </small><a href="https://github.com/bosichong" target="_blank">
            J.sky
        </a>
        <small>
            Copyright
            <i aria-hidden="true" class="fa fa-copyright">
            </i>
            2017-2023
        </small>
    </p>
</div></footer>
<!-- Minimal theme switcher -->
<script src="https://suiyan.cc/assets/js/minimal-theme-switcher.js"></script>
<!-- Scroll to Top button selector -->
<a class="to-top"><i class="fa fa-chevron-up fa-3" aria-hidden="true"></i></a>
<script src="https://suiyan.cc/assets/js/jquery.toTop.min.js"></script>
<script>
        jQuery(function($){
            // Plugin activation (basic - with all default values)
            // $('.to-top').toTop();

            // Plugin activation with options
            $('.to-top').toTop({
                //options with default values
                autohide: true,  //boolean 'true' or 'false'
                offset: 420,     //numeric value (as pixels) for scrolling length from top to hide automatically
                speed: 500,      //numeric value (as mili-seconds) for duration
                position:true,   //boolean 'true' or 'false'. Set this 'false' if you want to add custom position with your own css
                right: 15,       //numeric value (as pixels) for position from right. It will work only if the 'position' is set 'true'
                bottom: 30       //numeric value (as pixels) for position from bottom. It will work only if the 'position' is set 'true'
            });
        });

</script>
</body>
</html>