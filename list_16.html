<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="Python,Django,JavaScript,程序员,人生苦短,我用Python" name="keywords">
    <meta content=" Python Django JavaScript 学习讨论,我们是一群热爱Python的程序员，人生苦短，我用JavaScript！一个不会JavaScript的Python开发者不是一个好网管。" name="description">
    <meta content="J.sky" name="author">
    <title>SuiYan 碎言博客  List Pages 第16页</title>
    <!-- 引入 pico.css -->
    <link rel="stylesheet" href="https://suiyan.cc/assets/css/pico.min.css">
    <!-- 引入 图标CDN -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 引入 站点样式 -->
    <link rel="stylesheet" href="https://suiyan.cc/assets/css/custom.css">
    <script src="https://suiyan.cc/assets/js/jquery-3.3.1.min.js"></script>
    
</head>
<body>
<div class="hero" data-theme="dark" style="background-image: url('https://suiyan.cc/assets/images/bg.jpg');">
    <nav class="container-fluid"><ul>
    <li><a href="https://suiyan.cc/" class="contrast">SuiYan</a></li>
</ul>
<ul>
    <li>
        <details role="list" dir="rtl">
            <summary aria-haspopup="listbox" role="link" class="contrast">Theme</summary>
            <ul role="listbox">
                <li><a href="#" data-theme-switcher="auto">Auto</a></li>
                <li><a href="#" data-theme-switcher="light">Light</a></li>
                <li><a href="#" data-theme-switcher="dark">Dark</a></li>
            </ul>
        </details>
    </li>
</ul></nav>
    <head><header class="container">
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
    <hgroup class="hd">
        <img class="avatar" src="https://suiyan.cc/assets/images/avatar.jpg"/>
        <div><span id="typed"></span></div>
        <ul class="sns-ul">
            
            <li class="sns-li">
                <a href="https://github.com/bosichong/suiyan" target="_blank">
                    <i class="fa fa-github "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://gitee.com/J_Sky/suiyan" target="_blank">
                    <i class="fa fa-git "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://weibo.com/qq285911" target="_blank">
                    <i class="fa fa-weibo "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://user.qzone.qq.com/285911/" target="_blank">
                    <i class="fa fa-qq "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://www.zhihu.com/people/J_sky/activities" target="_blank">
                    <i class="fa fa-book "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://suiyan.cc/rss.xml" target="_blank">
                    <i class="fa fa-rss "></i>
                </a>
            </li>
            
        </ul>
    </hgroup>
    <script>
        const typed = new Typed('#typed', {
          strings: [
          
          'Life is short, you need Python',
          
          '人生苦短，我用Python.',
          
          'Beautiful is better than ugly.',
          
          '美丽优于丑陋.',
          
          'Explicit is better than implicit.',
          
          '直白优于含蓄.',
          
          'Simple is better than complex.',
          
          '简单优于复杂.',
          
          'Complex is better than complicated.',
          
          '复杂优于繁琐.',
          
          'Readability counts.',
          
          '可读性很重要.',
          
          ],
          typeSpeed: 100,
          backSpeed: 10,
          backDelay: 100,
          startDelay: 1000,
          loop:true
    });
  </script>
</header></head>
</div>
<main class="container">
    <div class="grid">
        <section>



<hgroup>
    <h2>python中导入不同目录中的自定义模块/class/函数/方法</h2>
    <h3> 作者:<a href="#">J.sky</a> | <small>发表于:2017-10-27 10:37:17</small> | <small>更新于:2023-03-25 00:01:19</small> | Tag:
        
        
        <samll>Python基础</samll>
        
    </h3>
</hgroup>
<p><p>前几天在封装<code>PY_RPG</code>框架时，需要导入一些自定义的类、函数、常量的时候，发现始终找不到相关模块，后来参考书籍及网络上的一些经验终于解决了这个问题。</p>
<h2>包和模块导入的需求</h2>
<p>假设有一个项目，有a/a.py（此为工具类提供一些简单的方法和常量），b/b.py（需要调用a/a.py）项目文件，我们先在a.py中定义一些函数及常量一会引入使用。</p>
<pre><code>M_TEST = 888
def print_text():
    print('这a.py下的一个打印文字函数')
</code></pre>
<p>现在我们引入测试</p>
<pre><code>import a.a
a.print_text()
</code></pre>
<p>ModuleNotFoundError: No module named 'a'  很显然这样是找不到正确目录的，那么问题来了，
如果是在同一目录，我们直接<code>import a</code>就搞定了，但实际工作中我们不可能把所有文件都放在一个目录中，如果需要导入其它目录的中.py文件，这时我们就需要用到<code>sys.path.append()</code></p>
<pre><code>['/Users/mac/PycharmProjects/PythonStudy/b', '/Library/Frameworks/Python.framework/Versions/3.6/lib/python36.zip', '/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6', '/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/lib-dynload', '/Users/mac/Library/Python/3.6/lib/python/site-packages', '/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages', '/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/beautifulsoup4-4.6.0-py3.6.egg', '/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/PyMySQL-0.7.11-py3.6.egg', '/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/xadmin-0.6.1-py3.6.egg', '/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django_formtools-2.0-py3.6.egg']
</code></pre>
<p>打印后，我们会发现很多目录，<code>python</code>加载包模块的目录就都在上边了，他会从这些目录中搜索需要加载内容的名称，如果有就加载进来。
那么我们如何把自己的文件加到上边的目录里？有几种方法：</p>
<ul>
<li>通过修改环境变量，这个不环保，而且文件多了，不可能都去修改。</li>
<li>复制文件到上边的目录中，有些不方便，不推荐</li>
<li><code>sys.path.append()</code>把目录加进索引，方便python搜索，推荐</li>
</ul>
<p>那么我们来试试吧</p>
<h2>如何优雅的获得目录地址？</h2>
<p>如果需要把目录加进到索引中，我们只需要一个绝对地址即可，但是这种方法如果我们复制工程到其它目录后，我们还需要修改这个索引，很不方便不科学。
这时我想到了<code>Django</code>配置文件中有一段代码</p>
<pre><code>BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
</code></pre>
<p>我们理解一下这段代码，<code>__file__</code>表示当前.py文件，<code>os.path.abspath(__file__)</code> 表示当前.py文件的绝对地址，<code>dirname</code>获得上一层目录地址，
那么如果我们当前的文件在根目录下的一个目录下边，那么上条语句正好获得了根目录的地址。我们来打印试试</p>
<pre><code>/Users/mac/PycharmProjects/PythonStudy/b/b.py
/Users/mac/PycharmProjects/PythonStudy/b
/Users/mac/PycharmProjects/PythonStudy
</code></pre>
<p>可以看到根目录地址已经得到了，然后通过<code>os.path.join()</code> 就可以拼装到工具类目录地址了，到这里我们的所有功能基本上可以实现了，具体实现请看下边的代码。</p>
<pre><code>import os 
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))#获取根目录
print(os.path.abspath(__file__))
print(os.path.dirname(os.path.abspath(__file__)))
print(BASE_DIR)
T_DIR = os.path.join(BASE_DIR,'a')#拼装工具类地址
print(T_DIR)
sys.path.append(T_DIR)
import a
print(a.M_TEST)
a.print_text()
</code></pre>
<h2>本文源码下载： a b 两个目录下为相关源文件</h2>
<ul>
<li><a href="https://github.com/bosichong/17python.com/">github</a></li>
<li><a href="https://gitee.com/J_Sky/17python.com/">开源中国码云镜像gitee</a></li>
</ul></p>


<hr>
<br>


<hgroup>
    <h2>基于Python、Tk构建的可视化目录文件同步助手</h2>
    <h3> 作者:<a href="#">J.sky</a> | <small>发表于:2017-10-26 15:04:15</small> | <small>更新于:2023-04-08 08:48:33</small> | Tag:
        
        
        <samll>站长源创</samll>
        
    </h3>
</hgroup>
<p><p>之前用java GUI写过一个简单的目录同步助手，前几天在WIN10下边想用的时候，发现竟然无法使用了，正好最近在学习python，所以用python重写了一简单的目录文件同步助手。</p>
<p><img alt="输入图片说明" src="https://suiyan.cc/assets/images/media/upload/2018/01/Snip20180109_24.png" /></p>
<h2>功能需求</h2>
<p>之前有些喜欢拍照，但设备和场景比较多，所以每次照相回来，都为每台设备创建目录，然后在目录下边创建以时间为名的目录进行照片备份。
之后这个备份了几年，后来目录越来越多，经常发现无法准确的判断哪些照片是否备份过，因为实在太多了，所以，需要一个实际目录与备份目录比较，
并且能把比较后的结果复制到备份目录中进行备份。</p>
<h2>需求分析</h2>
<p>从需求上分析：参数需要给定两个目录，然后有比较和复制两个功能，GUI构建上只需要两个目录选择和两个按钮，使用Tk即可实现。
技术上实现采用python的 filecmp shutil os 进行一些目录及文件的比较及复制来实现需求。</p>
<h2>逻辑分析</h2>
<p>通过目录选择框获得了两个字符串，然后进行比较，分析出不同的目录与文件，然后复制到目标目录中。
为此，我创建了一个目录比较类，专门负责比较目录与文件。
此类中的比较方法中使用到了递归，Python中的递归记得最大是1000次，我觉得这个目录层次应该是够了吧？
其实本程序中，目录与文件的分析是重要部分：</p>
<ul>
<li>先判断根目录中不相同的目录与文件，然后分别记录。</li>
<li>如果有相同的目录，使用递归比较这二个相同的目录。</li>
<li>最后分别创建目录，复制文件到目标目录中。</li>
</ul>
<h2>Tk Button传参方法</h2>
<p>在构建GUI的时候，点击按钮激活的函数需要传参数进去，但Python并没有在Button中提供传参的方法，后来查到可以使用lambda</p>
<pre><code>command=lambda: def(参数1, 参数2)
</code></pre>
<p>这样即可达到函数传参的实现。</p>
<h2>目录与文件的操作</h2>
<p>通过这个小软件的制作，达到了对python目录及文件的分析及创建复制的模块功能的复制，功能上还可以继续扩展，后续有需要再继续添加。</p>
<h2>本文源码下载</h2>
<ul>
<li><a href="https://github.com/bosichong/PyDirectoryComparison">github</a></li>
<li><a href="https://gitee.com/J_Sky/PyDirectoryComparison">开源中国码云镜像gitee</a></li>
</ul></p>


<hr>
<br>


<hgroup>
    <h2>“编学编玩”用Pygame编写游戏（5）pygame绘制一个钟表</h2>
    <h3> 作者:<a href="#">J.sky</a> | <small>发表于:2017-10-23 15:51:11</small> | <small>更新于:2023-04-08 08:48:33</small> | Tag:
        
        
        <samll>pygame</samll>
        
    </h3>
</hgroup>
<p><p>游戏中绘制圆及圆形的轨迹需求还是不少的，而且很多地方都需要用到圆及弧度的理论，如果想做些游戏的话，必须熟练掌握这些基本知识。</p>
<h2>一些知识点</h2>
<ul>
<li>radius 圆的半径</li>
<li>diameter 圆的直径</li>
<li>angle 角度</li>
<li>一个圆的完整的弧度 PI*2=6.28</li>
<li>1弧度的角度值为 360/6.28=57.3248</li>
<li>1度的弧度值为 6.28/360=0.0174</li>
<li>math.degrees(x)将角度x从弧度转换为度。</li>
<li>math.radians(x)将角度x从度转换为弧度。</li>
<li>math.sin(x)返回x弧度的正弦值。</li>
<li>math.cos(x)返回x弧度的余弦值。</li>
</ul>
<h2>圆周上点的坐标</h2>
<pre><code>x = math.cos(math.radians(angle)) * (radius)
y = math.sin(math.radians(angle)) * (radius）
</code></pre>
<p>如果不想深入了解的话，只需要记住，我们需要角度，即可求得圆周上的坐标值，对就上边的函数解释应该可以理解上边的python语句的含意。</p>
<h2>实例</h2>
<p>没有比绘制一个表盘更贴近实际需求的例子了，通过pythondatetime函数，我们可以很方便的获得时间，然后转换成相关数据。</p>
<p>以下为游戏效果图，建议下载相关代码跑一下，有问题可以留言给我。</p>
<p><img alt="输入图片说明" src="https://suiyan.cc/assets/images/media/upload/2017/10/Snip20171023_1.png" /></p>
<h2>本文源码下载</h2>
<p>请git clone 下所有代码，以免造成游戏跑不起来的情况。本例源文件pygame05.py</p>
<ul>
<li><a href="https://github.com/bosichong/My_pygame/">github</a></li>
<li><a href="https://gitee.com/J_Sky/My_pygame/">开源中国码云镜像gitee</a></li>
</ul></p>


<hr>
<br>


<hgroup>
    <h2>“编学编玩”用Pygame写游戏（4）一个python问答游戏</h2>
    <h3> 作者:<a href="#">J.sky</a> | <small>发表于:2017-10-22 09:50:35</small> | <small>更新于:2023-04-04 20:47:12</small> | Tag:
        
        
        <samll>pygame</samll>
        
    </h3>
</hgroup>
<p><p><img alt="输入图片说明" src="https://suiyan.cc/assets/images/media/upload/2017/10/Snip20171022_7.png" />
<img alt="输入图片说明" src="https://suiyan.cc/assets/images/media/upload/2017/10/Snip20171022_8.png" />
<img alt="输入图片说明" src="https://suiyan.cc/assets/images/media/upload/2017/10/Snip20171022_9.png" /></p>
<p>好开心，买的书终于到手了，极力推荐《Python游戏编程入门》！非常不错的一本书，另千万别买《Python和Pygame游戏开发指南》，好了，不要问什么，请叫我雷锋！</p>
<h2>游戏流程</h2>
<p>我觉得新手编写游戏的时候最大的难点是先把游戏构思的太细致了，以至于真正上手编程的时候完全不知道从哪里开始，平时构思设计游戏时，脑子里那闪耀的光芒，就觉得只要拿起键盘，一个旷世神作的游戏就要蛋生了！
实际呢？两眼瞪着电脑，我特么从哪开始写呢？，所以你需要一个流程，你可以拿纸笔画，或是找个流程图画一下。可以参考下图：</p>
<p><img alt="输入图片说明" src="https://suiyan.cc/assets/images/media/upload/2017/10/Snip20171022_5.png" /></p>
<p>有游戏流程后，先不要急于实现游戏的细节功能，先把流程走一下，先搭建游戏骨架<code>pygame.init()</code>，嗯，这个你应该很熟了。
然后我们通过面向对象的方法来进行这个小游戏的编写：</p>
<pre><code>pyqa.game_Start()
pyqa.show_qt()
pyqa.game_Over()
</code></pre>
<p>这样在循环中你应该很明白游戏的流程，虽然他们都在循环中，但我们可以控制他们在游戏中渲染的逻辑，这样我们就可以考虑好游戏中类的属性了。
这是一个问答游戏，需要有基本的题库数据，我们通过python的流读入数据，因为python可以很方便的读行，这样我们可以定义一些规律，把每一题的问题、选择项，答案都分别占一行。
这样导入数据后可以返回一个list，方便操作。</p>
<p>好了，我们定义一下当前答题类<code>class Pyqa</code>的一些属性，首先他需要三个开关，分别代表游戏开始画面，答题画面，游戏结束画面，当然游戏一开始就是开始画面，我们可以设置他为<code>True</code>，
这样游戏一旦开始，即可直接进入游戏开始画面，当然我们还需要定义三个函数，分别渲染三个场景，通过<code>if self.gameStart</code>判断当前是否要渲染这段场景。
好了，流程说到这里应该了解了吧？如果还是很头疼，建议先打代码试试，游戏内容可以不用填加，就试过场。</p>
<h2>游戏中的事件</h2>
<p>当我们运行游戏的时候，我们发现游戏只停止在游戏开始画面上，并没有继续进和到问答画面，因为我们没有加入游戏的控制，我们通过玩家来按键获取当前的游戏按键事件，
<code>pygame</code>中的游戏事件轮询获取相应的事件来响应用户的操作。</p>
<pre><code>while True:
    for event in pygame.event.get():
</code></pre>
<p>当我们通过<code>event.key == K_RETURN:</code>在游戏开始画面处获得了回车键的事件，就可以把游戏中的<code>self.showQuestion</code>设置<code>True</code>，然后开始游戏了，其它响应也是如此，
比如获取游戏中的答案数字，也是通过相应的键值获取，具体可以查看代码了解。</p>
<h2>答题场景编写</h2>
<p>本游戏的核心就是回答问题，导入题库后，通过<code>def show_qt()</code>方法来渲染问题及选项。我在游戏中定义了一个函数<code>def print_text</code>是专门用来打印游戏中的文字的。
当我们在游戏中选择答案按下数字键1-4的时候，我们会通过<code>pyqa.handle_input(int)</code>方法来处理当前游戏中的一些数据，比如回答是否正确，提示正确答案，记录回答正确数等，
当我们再次按下回车键，<code>def next_question</code>方法会更新问题题库的索引指针，告诉<code>def show_qt()</code>我得渲染下一道题了！</p>
<h2>游戏结束</h2>
<p>当<code>def next_question</code>通过<code>self.current &gt;= len(self.data)</code>发现已经到达题库最后边了，游戏就要结束了，设置游戏开关相关参数为false，设置游戏结束标识<code>gameOver</code>为<code>true</code>
进入游戏结束画面，展示游戏数据统计，最后当然还可以让你有重来的机会，具体实现请看代码吧，无非就是一些按键事件触发。</p>
<h2>写在最后</h2>
<p>无论是整个游戏还是中间的答题系统，我们发现在这个游戏中我们必须细致入微的进行设计判断每一步的操作，这就是游戏设计的精髓及乐趣，至少我们可以按着自己的需要来进行设计，当你把游戏设计成功，代码编写运行无错时，希望你能体会到这其中的乐趣！如果你有时间，可否帮忙丰富一下题？谢啦，记得提git提交给我哦，谢谢了。</p>
<h2>本文源码下载</h2>
<p>请git clone 下所有代码，以免造成游戏跑不起来的情况。</p>
<ul>
<li><a href="https://github.com/bosichong/My_pygame/">github</a></li>
<li><a href="https://gitee.com/J_Sky/My_pygame/">开源中国码云镜像gitee</a></li>
</ul></p>


<hr>
<br>



<nav>
    <li><a href="list_15.html" role="button" class="outline">Prev</a></li>
    <li><small>16 / 28</small></li>
    <li><a href="list_17.html" role="button" class="outline">Next</a></li>
</nav>

</section>
        <aside><section>
    <hgroup>
        <h2>Search</h2>
        <h3>Search This SuiYan blog</h3>
    </hgroup>

    <!-- Search -->
    <input type="text" id="search-input" name="search" placeholder="JavaScript">
    <button id="search-btn" class="contrast"
            data-target="modal-example"
            onClick="toggleModal(event)">Search
    </button>


    <!-- Modal -->
    <dialog id="modal-example">
        <article>
            <a href="#close"
               aria-label="Close"
               class="close"
               data-target="modal-example"
               onClick="toggleModal(event)">
            </a>
            <h3>搜索结果</h3>
            <div id="modal" style="display: none;">
                <ul id="result-list"></ul>
            </div>
        </article>
    </dialog>
    <script src="https://suiyan.cc/assets/js/url.js"></script>
    <script src="https://suiyan.cc/assets/js/main.js"></script>
    <script src="https://suiyan.cc/assets/js/modal.js"></script>

</section>


<nav>
    <ul>
        
        <li>
            <a href="https://suiyan.cc/index.html">
                <i class="fa fa-home"></i>
                Blog Home
            </a>
        </li>
        
        <li>
            <a href="https://suiyan.cc/archives.html">
                <i class="fa fa-archive"></i>
                Blog Archive
            </a>
        </li>
        
        <li>
            <a href="https://suiyan.cc/tags.html">
                <i class="fa fa-tags"></i>
                Blog Tag
            </a>
        </li>
        
        <li>
            <a href="https://suiyan.cc/aboutme.html">
                <i class="fa fa-user"></i>
                About Me
            </a>
        </li>
        
    </ul>
</nav>
</aside>
    </div>

</main>
<footer><div class="container">
    <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
    <p><small>
        Powered by
    </small>
        <a href="https://github.com/Jsky2020/suiyan" target="_blank">
            SuiYan
        </a>
       <small> | </small><a href="https://github.com/bosichong" target="_blank">
            J.sky
        </a>
        <small>
            Copyright
            <i aria-hidden="true" class="fa fa-copyright">
            </i>
            2017-2023
        </small>
    </p>
</div></footer>
<!-- Minimal theme switcher -->
<script src="https://suiyan.cc/assets/js/minimal-theme-switcher.js"></script>
<!-- Scroll to Top button selector -->
<a class="to-top"><i class="fa fa-chevron-up fa-3" aria-hidden="true"></i></a>
<script src="https://suiyan.cc/assets/js/jquery.toTop.min.js"></script>
<script>
        jQuery(function($){
            // Plugin activation (basic - with all default values)
            // $('.to-top').toTop();

            // Plugin activation with options
            $('.to-top').toTop({
                //options with default values
                autohide: true,  //boolean 'true' or 'false'
                offset: 420,     //numeric value (as pixels) for scrolling length from top to hide automatically
                speed: 500,      //numeric value (as mili-seconds) for duration
                position:true,   //boolean 'true' or 'false'. Set this 'false' if you want to add custom position with your own css
                right: 15,       //numeric value (as pixels) for position from right. It will work only if the 'position' is set 'true'
                bottom: 30       //numeric value (as pixels) for position from bottom. It will work only if the 'position' is set 'true'
            });
        });

</script>
</body>
</html>