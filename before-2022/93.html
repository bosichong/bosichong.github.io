<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="Python GUI" name="keywords">
    <meta content="wxPython dialogs 弹出对话框" name="description">
    <meta content="J.sky" name="author">
    <link rel="icon" type="image/png" href="https://suiyan.cc/assets/images/favicon/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="https://suiyan.cc/assets/images/favicon/favicon-16x16.png" sizes="16x16" />
    <title>SuiYan-碎言博客wxPython编程学习笔记(07)wxPython Dialog 弹出对话</title>
    <!-- 引入 pico.css -->
    <link rel="stylesheet" href="https://suiyan.cc/assets/css/pico.min.css">
    <!-- 引入 图标CDN -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 引入 站点样式 -->
    <link rel="stylesheet" href="https://suiyan.cc/assets/css/custom.css">
    <script src="https://suiyan.cc/assets/js/jquery-3.3.1.min.js"></script>
</head>
<body>
<div class="hero" data-theme="dark" style="background-image: url('https://suiyan.cc/assets/images/bg.jpg');">
    <nav class="container-fluid"><ul>
    <li><a href="https://suiyan.cc/" class="contrast">SuiYan</a></li>
</ul>
<ul>
    <li>
        <details role="list" dir="rtl">
            <summary aria-haspopup="listbox" role="link" class="contrast">Theme</summary>
            <ul role="listbox">
                <li><a href="#" data-theme-switcher="auto">Auto</a></li>
                <li><a href="#" data-theme-switcher="light">Light</a></li>
                <li><a href="#" data-theme-switcher="dark">Dark</a></li>
            </ul>
        </details>
    </li>
</ul></nav>
    <head><header class="container">
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
    <hgroup class="hd">
        <img class="avatar" src="https://suiyan.cc/assets/images/avatar.jpg"/>
        <div><span id="typed"></span></div>
        <ul class="sns-ul">
            
            <li class="sns-li">
                <a href="https://github.com/bosichong/suiyan" target="_blank">
                    <i class="fa fa-github "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://gitee.com/J_Sky/suiyan" target="_blank">
                    <i class="fa fa-git "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://weibo.com/qq285911" target="_blank">
                    <i class="fa fa-weibo "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://user.qzone.qq.com/285911/" target="_blank">
                    <i class="fa fa-qq "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://www.zhihu.com/people/J_sky/activities" target="_blank">
                    <i class="fa fa-book "></i>
                </a>
            </li>
            
            <li class="sns-li">
                <a href="https://suiyan.cc/rss.xml" target="_blank">
                    <i class="fa fa-rss "></i>
                </a>
            </li>
            
        </ul>
    </hgroup>
    <script>
        const typed = new Typed('#typed', {
          strings: [
          
          'Life is short, you need Python',
          
          '人生苦短，我用Python.',
          
          'Beautiful is better than ugly.',
          
          '美丽优于丑陋.',
          
          'Explicit is better than implicit.',
          
          '直白优于含蓄.',
          
          'Simple is better than complex.',
          
          '简单优于复杂.',
          
          'Complex is better than complicated.',
          
          '复杂优于繁琐.',
          
          'Readability counts.',
          
          '可读性很重要.',
          
          ],
          typeSpeed: 100,
          backSpeed: 10,
          backDelay: 100,
          startDelay: 1000,
          loop:true
    });
  </script>
</header></head>
</div>
<main class="container">
    <div class="grid">
        <section>



<hgroup>
    <h2>wxPython编程学习笔记(07)wxPython Dialog 弹出对话</h2>
    <h3> 作者:<a href="#">J.sky</a> | <small>发表于:2018-12-25 13:17:28</small> | <small>更新于:2023-04-13 09:40:24</small> | Tag:
        
        
        <small>Python GUI</small>
        
    </h3>
</hgroup>
<p><p><img alt="输入图片说明" src="https://suiyan.cc/assets/images/media/upload/2018/12/Snip20181225_6.png" /></p>
<h3>wxPython dialogs 弹出对话框</h3>
<p>程序中经常会遇到弹出对话框询问操作的场景，wxPython dialogs为此提供了应用的支持，
wxPython dialogs有几种，常用的比如：wx.MessageBox wx.MessageDialog wx.Dialog wx.adv.AboutBox等。</p>
<h3>dialog的创建</h3>
<p>一般dialog都会配合Button使用，当按钮绑定事件后，在绑定事件的函数中创建应用即可，代码如下：</p>
<pre><code>wx.MessageDialog(None, 'Download completed', 'Info', wx.OK)
</code></pre>
<p>其它类型的Dialog创建也类似如下代码，其中风格参数如下：</p>
<pre><code>flag    meaning
wx.OK   show OK button
wx.CANCEL   show Cancel button
wx.YES_NO   show Yes, No buttons
wx.YES_DEFAULT  make Yes button the default
wx.NO_DEFAULT   make No button the default
wx.ICON_EXCLAMATION show an alert icon
wx.ICON_ERROR   show an error icon
wx.ICON_HAND    same as wx.ICON_ERROR
wx.ICON_INFORMATION show an info icon
wx.ICON_QUESTION    show a question icon
</code></pre>
<p>可以根据自己的需要进行组合，例如组合YES和NO，yes默认选择，并且加带图标的代码：wx.YES_NO|wx.YES_DEFAULT | wx.ICON_INFORMATION</p>
<h3>MessageDialog 获取返回值</h3>
<p>当点击对话框上的按钮后窗口就会关闭，我们需要获得关闭后的返回值，可以通过如下代码获得：</p>
<pre><code>    dial = wx.MessageDialog(None, 'Are you sure to quit?', 'Question',
        wx.YES_NO | wx.YES_DEFAULT | wx.ICON_QUESTION)
    ret = dial.ShowModal()
    if ret == wx.ID_YES:
        print("YES")
    else:
        print("NO")
</code></pre>
<p>好啦，完整的代码在下边，大家可以跑跑看看。</p>
<h3>Dialog和窗口间传递数据</h3>
<p>遇到过一个在主窗口弹出Dialog的需求，因为是第一次用wxPython，所以不知道数据如何传送给主窗口，后来网上扒了扒发现了一些答案。
我这里的解决方案：</p>
<ol>
<li>先在Dialog窗口中创建类属性，然后通过类属性传递给主窗口</li>
<li>Dialog中创建一个属性self.ret=0，当点击按钮的时候设置其值为1，这样判断一下这个值，用来接收数据，如果为0就不接收。</li>
</ol>
<p>具体可以参考下边的代码</p>
<pre><code>import wx


class MyDialog(wx.Dialog):
    def __init__(self, *args, **kw):
        super(MyDialog, self).__init__(*args, **kw)
        self.ret = 0
        hbox = wx.BoxSizer(wx.HORIZONTAL)
        self.st = wx.TextCtrl(self, wx.ID_ANY, "111")
        self.bt = wx.Button(self, wx.ID_ANY, "提交数据")
        self.bt.Bind(wx.EVT_BUTTON,self.onButton)
        hbox.AddMany([(self.st),(self.bt)])
        self.SetSizer(hbox)

    def onButton(self,e):
        self.ret=1
        self.EndModal(1)

class HelloFrame(wx.Frame):
    def __init__(self, *args, **kw):
        # 调用父类的创建方法
        super(HelloFrame, self).__init__(*args, **kw)

        hbox = wx.BoxSizer(wx.VERTICAL)
        bt0 = wx.Button(self, 1, "wx.Dialog")
        bt1 = wx.Button(self, 1, "wx.Dialog")
        bt2 = wx.Button(self, 1, 'Error')
        bt3 = wx.Button(self, 1, 'Question')
        bt4 = wx.Button(self, 1, 'Alert')

        bt0.Bind(wx.EVT_BUTTON, self.onModal0)
        bt1.Bind(wx.EVT_BUTTON, self.onModal1)
        bt2.Bind(wx.EVT_BUTTON, self.showMessage1)
        bt3.Bind(wx.EVT_BUTTON, self.showMessage2)
        bt4.Bind(wx.EVT_BUTTON, self.showMessage3)

        hbox.AddMany([(bt0, 1, wx.EXPAND | wx.ALIGN_TOP), (bt1, 1, wx.EXPAND), (bt2, 1, wx.EXPAND), (bt3, 1, wx.EXPAND),
                      (bt4, 1, wx.EXPAND), ])
        self.SetSizer(hbox)

    def onModal0(self, event):
        '''模态'''
        myDialog= MyDialog(None, 22, title="Dialog")
        myDialog.ShowModal()
        if myDialog.ret == 1:
            print(myDialog.st.GetValue())
        else:
            print("888888")
        myDialog.Destroy()

    def onModal1(self, event):
        '''无模态'''
        wx.Dialog(self, 1, "Dialog", pos=(100, 100)).Show()

    def showMessage(self, e):
        smd = wx.MessageDialog(None, "This is a Message Box", "Message",
                               wx.YES_NO | wx.YES_DEFAULT | wx.ICON_INFORMATION)
        smd.ShowModal()

    def showMessage1(self, event):
        dial = wx.MessageDialog(None, 'Download completed', 'Info', wx.OK)
        ret = dial.ShowModal()
        if ret == wx.OK:
            print("OK")

    def showMessage2(self, event):
        dial = wx.MessageDialog(None, 'Are you sure to quit?', 'Question',
                                wx.YES_NO | wx.YES_DEFAULT | wx.ICON_QUESTION)
        ret = dial.ShowModal()
        if ret == wx.ID_YES:
            print("YES")
        else:
            print("NO")

    def showMessage3(self, event):
        dial = wx.MessageBox('Download completed', 'Info',
                             wx.OK | wx.ICON_INFORMATION)
        ret = dial
        if ret == wx.OK:
            print("OK")


def main():
    app = wx.App()
    frm = HelloFrame(None, title='wxPython Button', )
    frm.Show()  # 显示窗口
    app.MainLoop()  # 持续更新窗口


if __name__ == '__main__':
    main()
</code></pre>
<h3>本文源码下载：</h3>
<ul>
<li><a href="https://github.com/bosichong/wxPythonTest/blob/master/wxpy07.py">github</a></li>
<li><a href="https://gitee.com/J_Sky/wxPythonTest/blob/master/wxpy07.py">开源中国码云镜像gitee</a></li>
</ul></p>


</section>
        <aside><section>
    <hgroup>
        <h2>Search</h2>
        <h3>Search This SuiYan blog</h3>
    </hgroup>

    <!-- Search -->
    <div id="blog-search">
        <input type="text" id="search-input" name="search" placeholder="JavaScript">
        <button id="search-btn" class="contrast"
            data-target="modal-example"
            onClick="toggleModal(event)">Search
        </button>

    </div>



    <!-- Modal -->
    <dialog id="modal-example">
        <article>
            <a href="#close"
               aria-label="Close"
               class="close"
               data-target="modal-example"
               onClick="toggleModal(event)">
            </a>
            <h3>搜索结果</h3>
            <div id="modal" style="display: none;">
                <ul id="result-list"></ul>
            </div>
        </article>
    </dialog>
    <script src="https://suiyan.cc/assets/js/url.js"></script>
    <script src="https://suiyan.cc/assets/js/main.js"></script>
    <script src="https://suiyan.cc/assets/js/modal.js"></script>

</section>


<nav>
    <ul id="blog-nav">
        
        <li>
            <a href="https://suiyan.cc/index.html">
                <i class="fa fa-home"></i>
                Home
            </a>
        </li>
        
        <li>
            <a href="https://suiyan.cc/archives.html">
                <i class="fa fa-archive"></i>
                Archive
            </a>
        </li>
        
        <li>
            <a href="https://suiyan.cc/tags.html">
                <i class="fa fa-tags"></i>
                Tags
            </a>
        </li>
        
        <li>
            <a href="https://suiyan.cc/aboutme.html">
                <i class="fa fa-user"></i>
                About Me
            </a>
        </li>
        
    </ul>
</nav>
</aside>
    </div>

</main>
<footer><div class="container">
    <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a><br />本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a>进行许可。
    <div><small>
        Powered by
    </small>
        <a href="https://github.com/Jsky2020/suiyan" target="_blank">
            SuiYan
        </a>
       <small> | </small>
        <small>
            Copyright
            <i aria-hidden="true" class="fa fa-copyright">
            </i>
            2017-2023
        </small>
    </div>
</div></footer>
<!-- Minimal theme switcher -->
<script src="https://suiyan.cc/assets/js/minimal-theme-switcher.js"></script>
<!-- Scroll to Top button selector -->
<a class="to-top"><i class="fa fa-chevron-up fa-3" aria-hidden="true"></i></a>
<script src="https://suiyan.cc/assets/js/jquery.toTop.min.js"></script>
<script>
        jQuery(function($){
            // Plugin activation (basic - with all default values)
            // $('.to-top').toTop();

            // Plugin activation with options
            $('.to-top').toTop({
                //options with default values
                autohide: true,  //boolean 'true' or 'false'
                offset: 420,     //numeric value (as pixels) for scrolling length from top to hide automatically
                speed: 500,      //numeric value (as mili-seconds) for duration
                position:true,   //boolean 'true' or 'false'. Set this 'false' if you want to add custom position with your own css
                right: 15,       //numeric value (as pixels) for position from right. It will work only if the 'position' is set 'true'
                bottom: 30       //numeric value (as pixels) for position from bottom. It will work only if the 'position' is set 'true'
            });
        });

</script>
</body>
</html>